# timeout 超时处理

## 服务端超时

本期不做，后期考虑。

## 客户端超时

long timeout 单位为 ms

时间从放入的一刻开始算起。

## 放入的时候

因为计算是一次，但是读取是多次。

所以时间在放入时直接计算好。

```java
(seqId, lastTimeMills)
```

## 定时任务执行

定时执行 这个要多久执行一次？

这是一个很讲究的东西。

超时，个人任务是一个小概率时间，除非超时时间设计的不合理。

所以 5min 循环检查一次就够了。

主要是为了避免时间过长的请求。

## 实时性

为了保证调用的时候符合预期而又不用一直去扫描超时的请求。

可以在 RpcResponse() 回来之后，获取对应的超时时间，如果超时，则直接抛出超时异常。